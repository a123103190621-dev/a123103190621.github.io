html <!DOCTYPE html> <html lang="zh-CN"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"> <title>笨兔子和小熊猫的恋爱记账本</title> <style> :root { --primary-bg-color: #f0f4f8; --secondary-bg-color: #ffffff; --text-color: #333; --primary-color: #ffc0cb; /* 浅粉色 */ --secondary-color: #add8e6; /* 浅蓝色 */ --accent-color: #f3a6b2; --shadow-color: rgba(0, 0, 0, 0.1); } body, html { margin: 0; padding: 0; height: 100%; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: var(--primary-bg-color); overflow: hidden; position: relative; } .rain-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; overflow: hidden; } .raindrop { position: absolute; bottom: 100%; width: 1px; height: 50px; background: linear-gradient(to bottom, rgba(255,255,255,0), var(--secondary-color)); animation: fall 1s linear infinite; } @keyframes fall { to { transform: translateY(100vh); } } .container { width: 100%; max-width: 480px; height: 100vh; margin: 0 auto; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); box-shadow: 0 0 20px var(--shadow-color); display: flex; flex-direction: column; overflow: hidden; position: relative; } .header { padding: 20px; text-align: center; color: var(--text-color); position: relative; } .header-avatar { width: 80px; height: 80px; border-radius: 50%; cursor: pointer; border: 3px solid var(--secondary-bg-color); box-shadow: 0 2px 4px var(--shadow-color); object-fit: cover; } .book-title { font-size: 1.2em; font-weight: bold; margin-top: 10px; } .tabs { display: flex; justify-content: space-around; background-color: transparent; padding: 10px 0; } .tab-button { padding: 10px 20px; cursor: pointer; border: none; background-color: rgba(255, 255, 255, 0.5); color: var(--text-color); font-size: 1em; border-radius: 20px; transition: all 0.3s ease; } .tab-button.active { background-color: var(--secondary-bg-color); font-weight: bold; box-shadow: 0 2px 5px var(--shadow-color); } .content { flex-grow: 1; padding: 15px; overflow-y: auto; background-color: var(--secondary-bg-color); border-top-left-radius: 20px; border-top-right-radius: 20px; } .ledger-content { display: none; } .ledger-content.active { display: block; } .summary { padding: 15px; margin-bottom: 15px; border-radius: 10px; background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: var(--text-color); text-align: center; } .summary h3 { margin: 0 0 5px 0; font-size: 1em; } .summary .amount { font-size: 1.8em; font-weight: bold; } .filters { display: flex; justify-content: center; margin-bottom: 15px; } .filter-btn { background: var(--primary-bg-color); border: 1px solid #ddd; padding: 5px 12px; margin: 0 5px; border-radius: 15px; cursor: pointer; } .filter-btn.active { background: var(--accent-color); color: white; } .transaction-list { list-style: none; padding: 0; margin: 0; } .transaction-item { display: flex; align-items: flex-start; padding: 15px 0; border-bottom: 1px solid #eee; } .transaction-details { flex-grow: 1; } .transaction-details .tag { font-weight: bold; } .transaction-details .note { color: #666; font-size: 0.9em; margin: 5px 0; } .transaction-time, .transaction-account { color: #999; font-size: 0.8em; } .transaction-amount { font-size: 1.2em; font-weight: bold; min-width: 80px; text-align: right; } .deposit { color: #28a745; } .expense { color: #dc3545; } .ling-comment { background-color: #f0f8ff; border-radius: 8px; padding: 10px; margin-top: 10px; font-size: 0.9em; position: relative; } .ling-comment::before { content: ''; position: absolute; top: -10px; left: 20px; border-width: 0 10px 10px; border-style: solid; border-color: transparent transparent #f0f8ff; } .ling-name { font-weight: bold; color: var(--accent-color); cursor: pointer; } .add-btn-container { padding: 20px; background-color: var(--secondary-bg-color); } .add-btn { display: block; width: 100%; padding: 15px; font-size: 1.2em; background-color: var(--accent-color); color: white; border: none; border-radius: 10px; cursor: pointer; text-align: center; } /* Modal Styles */ .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.4); align-items: center; justify-content: center; } .modal-content { background-color: #fefefe; margin: auto; padding: 20px; border: 1px solid #888; width: 90%; max-width: 450px; border-radius: 15px; position: relative; } .close-btn { color: #aaa; position: absolute; top: 10px; right: 15px; font-size: 28px; font-weight: bold; cursor: pointer; } .modal-content h2 { text-align: center; margin-top: 0; } .modal-form label { display: block; margin-bottom: 5px; font-weight: bold; } .modal-form input, .modal-form select, .modal-form textarea { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 5px; box-sizing: border-box; } .modal-form button { width: 100%; padding: 12px; background-color: var(--accent-color); color: white; border: none; border-radius: 5px; font-size: 1em; cursor: pointer; } .delete-btn { color: #dc3545; font-size: 0.8em; cursor: pointer; margin-left: 10px; } </style> </head> <body> <div class="rain-container"></div> <div class="container"> <div class="header"> <input type="file" id="avatarUpload" hidden accept="image/*"> <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_y0-s-q202crwze7M48a4n5Vv2X-yX-ABRw&s" alt="头像" id="avatar" class="header-avatar"> <h1 class="book-title" id="bookTitle" contenteditable="true">笨兔子和小熊猫的恋爱记账本</h1> </div> <div class="tabs"> <button class="tab-button active" id="loveFundTab" data-ledger="loveFund">和凌肖的恋爱小荷包</button> <button class="tab-button" id="dailySpendTab" data-ledger="dailySpend">日常开销</button> </div> <div class="content"> <!-- 恋爱基金账本 --> <div id="loveFund" class="ledger-content active"> <div class="summary"> <h3>存款余额</h3> <p class="amount" id="loveFundBalance">¥0.00</p> </div> <div class="filters" data-ledger="loveFund"> <button class="filter-btn active" data-period="all">全部</button> <button class="filter-btn" data-period="week">周</button> <button class="filter-btn" data-period="month">月</button> <button class="filter-btn" data-period="year">年</button> </div> <ul class="transaction-list" id="loveFundList"></ul> </div> <!-- 日常开销账本 --> <div id="dailySpend" class="ledger-content"> <div class="summary"> <h3>总消费</h3> <p class="amount" id="dailySpendTotal">¥0.00</p> </div> <div class="filters" data-ledger="dailySpend"> <button class="filter-btn active" data-period="all">全部</button> <button class="filter-btn" data-period="week">周</button> <button class="filter-btn" data-period="month">月</button> <button class="filter-btn" data-period="year">年</button> </div> <ul class="transaction-list" id="dailySpendList"></ul> </div> </div> <div class="add-btn-container"> <button id="showModalBtn" class="add-btn">记一笔</button> </div> </div> <!-- 记账模态框 --> <div id="transactionModal" class="modal" style="display: none;"> <div class="modal-content"> <span class="close-btn">&times;</span> <h2 id="modalTitle">记一笔</h2> <form id="transactionForm" class="modal-form"> <input type="hidden" id="ledgerType" value="loveFund"> <label for="type">类型:</label> <select id="type" name="type"> <option value="deposit">存款</option> <option value="expense">支出</option> </select> <label for="account">账户:</label> <select id="account" name="account"> <option value="微信">微信</option> <option value="支付宝">支付宝</option> <option value="银行卡">银行卡</option> </select> <label for="amount">金额:</label> <input type="number" id="amount" name="amount" placeholder="0.00" required step="0.01"> <div id="tag-container"> <label for="tag">标签:</label> <select id="tag" name="tag"> <option value="零食">零食</option> <option value="衣服">衣服</option> <option value="交通">交通</option> <option value="旅行">旅行</option> <option value="话费网费">话费网费</option> <option value="学习">学习</option> <option value="日用品">日用品</option> <option value="美妆">美妆</option> <option value="医疗">医疗</option> <option value="娱乐">娱乐</option> <option value="人情往来">人情往来</option> <option value="运动">运动</option> <option value="水电煤">水电煤</option> <option value="其他">其他</option> </select> </div> <label for="note">备注:</label> <textarea id="note" name="note" rows="2" placeholder="有什么要补充的..."></textarea> <button type="submit">保存</button> </form> </div> </div> <script> document.addEventListener('DOMContentLoaded', function() { // 凌肖人设留言 const lingXiaoComments = { deposit: [ "看来我们的旅游资金又增加了。", "存钱可以，别饿着肚子。", "又加班了？不如存点时间陪我。", "我们的未来基金+1", "去吃火锅怎么样？我现在去找你。", "要不要来live house看我演出？", "行，下次带你去吃好吃的。", "积少成多，这么着急干什么，我来找你了。", "笨兔子理财能力见长啊。", "啧，看来要准备个更大的存钱罐了。", "啧，别累着自己，晚上我去接你。", "可以啊，这么能干。", "livehouse第一排的位置给你留着呢，大制作人什么时候赏脸？", "假期想去哪儿玩？反正和你一起，去哪儿都可以。", "走，带你吃顿好的。" ], expense: { 零食: [ "又背着我吃独食？", "啧，怎么不带我一起？", "独乐乐不如众乐乐，分我一点。", "下次给我买零食就够了，adam他们不要。", "就这么点？够你塞牙缝？", "你是不是又背着我偷吃了？" ], 衣服: [ "买新衣服了？怎么不带我去。", "眼光不错，果然和我呆久了笨兔子的审美都提升了不少。", "买这么多新衣服，什么时候和我出来逛逛？", "情侣装啊，我考虑一下" ], 交通: [ "去哪儿了？怎么不叫我一起？", "啧，这么远？下次我送你。", "Adam他们问你什么时候来live house", "到家了？我来找你了。", "下次滑滑板带你。"], 旅行: [ "怎么不带我？", "玩得开心吗，笨兔子。", "啧，照片发我看看。", "下次我们一起去。", "想我了没？" ], 话费网费: [ "跟谁聊这么久？", "知道了。" ], 学习: [ "啧，品学兼优这四个字懂吗？就是专门形容我的。", "啧，别读傻了。", "行，学习是好事。", "看不懂的来问我。" ], 日用品: [ "买的什么？我看看。", "嗯，这些是该买了。", "还缺什么，列个单子给我。" ], 美妆: [ "看我干什么？我现在可分得清口红色号了。", "这是什么？", "上次的那个口红比较好吃。", "这些瓶瓶罐罐的看着就头晕。", "让我看看买了什么新东西。" ], 医疗: [ "生病了？怎么不告诉我。", "啧，笨兔子，会不会照顾自己。", "哪不舒服？我现在过去。", "我现在过去。" ], 娱乐: [ "去看live了？哪个乐队？", "打游戏吗？一起。", "上线怎么不喊我。", "明天陪我去碗池滑两圈。", "这周日live house的演出——你会来的吧。", "下个假期，我先预定了。", "不喊我一起？", "他们技术哪有我高。" ], 人情往来: [ "什么人情？", "嗯，知道了。" ], 运动: [ "去运动了？真是难得。", "不如陪我去滑滑板，保你能吃好睡好", "怎么不喊我一起？", "哟，太阳打西边出来了。", "开门，我带了烧烤。", "减什么肥啊，你哪儿胖了？" ], 水电煤: [ "生活费。", "知道了。", "嗯。" ], 其他: [ "这又是什么？", "给你捏了个兔子。", "？解释一下。", "行吧。", "我看看。", "嗯。" ] } }; // DOM Elements const avatar = document.getElementById('avatar'); const avatarUpload = document.getElementById('avatarUpload'); const bookTitle = document.getElementById('bookTitle'); const tabs = document.querySelectorAll('.tab-button'); const ledgerContents = document.querySelectorAll('.ledger-content'); const showModalBtn = document.getElementById('showModalBtn'); const modal = document.getElementById('transactionModal'); const closeModalBtn = document.querySelector('.close-btn'); const transactionForm = document.getElementById('transactionForm'); const ledgerTypeInput = document.getElementById('ledgerType'); const typeSelect = document.getElementById('type'); const tagContainer = document.getElementById('tag-container'); const modalTitle = document.getElementById('modalTitle'); let currentLedger = 'loveFund'; let lingXiaoName = "凌肖"; // --- DATA HANDLING --- function getTransactions() { const data = localStorage.getItem('transactions'); return data ? JSON.parse(data) : { loveFund: [], dailySpend: [] }; } function saveTransactions(transactions) { localStorage.setItem('transactions', JSON.stringify(transactions)); } function getAvatar() { return localStorage.getItem('avatar') || 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR_y0-s-q202crwze7M48a4n5Vv2X-yX-ABRw&s'; } function saveAvatar(src) { localStorage.setItem('avatar', src); } function getBookNames() { const names = localStorage.getItem('bookNames'); return names ? JSON.parse(names) : {loveFund: "和凌肖的恋爱小荷包", dailySpend: "日常开销"}; } function saveBookNames(names) { localStorage.setItem('bookNames', JSON.stringify(names)); } function getLingXiaoName() { return localStorage.getItem('lingXiaoName') || '凌肖'; } function saveLingXiaoName(name) { localStorage.setItem('lingXiaoName', name); } // --- UI FUNCTIONS --- function switchTab(ledger) { currentLedger = ledger; ledgerTypeInput.value = ledger; tabs.forEach(tab => { tab.classList.toggle('active', tab.dataset.ledger === ledger); }); ledgerContents.forEach(content => { content.classList.toggle('active', content.id === ledger); }); updateAddButtonText(); updateFormForLedger(); renderTransactions(); } function updateAddButtonText() { const bookNames = getBookNames(); showModalBtn.textContent = `为"${bookNames[currentLedger]}"记一笔`; } function updateFormForLedger() { if (currentLedger === 'loveFund') { typeSelect.value = 'deposit'; typeSelect.disabled = true; tagContainer.style.display = 'none'; modalTitle.textContent = '存一笔恋爱基金'; } else { typeSelect.value = 'expense'; typeSelect.disabled = true; tagContainer.style.display = 'block'; modalTitle.textContent = '记一笔日常开销'; } } function getRandomComment(type, tag = null, amount = 0) { if (type === 'deposit') { const comments = lingXiaoComments.deposit; return comments[Math.floor(Math.random() * comments.length)]; } else if (type === 'expense' && tag) { let comments = lingXiaoComments.expense[tag] || lingXiaoComments.expense.其他; // 根据金额增加一些吐槽 if (amount > 200) { comments = comments.concat(["啧，买这么多，你这是把店搬空了？"]); } else if (amount < 10) { comments = comments.concat(["蚊子腿也是肉。", "啧，晚上去吃顿好的？"]); } return comments[Math.floor(Math.random() * comments.length)]; } return "嗯。"; } function renderTransactions(period = 'all') { const transactions = getTransactions(); ['loveFund', 'dailySpend'].forEach(ledger => { const listEl = document.getElementById(`${ledger}List`); const filteredTransactions = filterByPeriod(transactions[ledger], period); listEl.innerHTML = ''; filteredTransactions.forEach(t => { const item = document.createElement('li'); item.className = 'transaction-item'; item.dataset.id = t.id; const typeClass = t.type === 'deposit' ? 'deposit' : 'expense'; const sign = t.type === 'deposit' ? '+' : '-'; item.innerHTML = ` <div class="transaction-details"> <span class="tag">${t.type === 'expense' ? t.tag : '恋爱基金存款'}</span> ${t.note ? `<p class="note">${t.note}</p>` : ''} <span class="transaction-time">${new Date(t.date).toLocaleString()}</span> <span class="transaction-account"> • ${t.account}</span> <div class="ling-comment"> <strong class="ling-name" contenteditable="true">${lingXiaoName}</strong>: ${t.comment} </div> </div> <div class="transaction-amount ${typeClass}"> ${sign}¥${t.amount.toFixed(2)} </div> <span class="delete-btn" data-id="${t.id}" data-ledger="${ledger}">删除</span> `; listEl.appendChild(item); }); }); updateSummaries(period); } function updateSummaries(period = 'all') { const transactions = getTransactions(); // Love Fund const loveFundTransactions = filterByPeriod(transactions.loveFund, period); const loveFundBalance = loveFundTransactions.reduce((sum, t) => sum + t.amount, 0); document.getElementById('loveFundBalance').textContent = `¥${loveFundBalance.toFixed(2)}`; // Daily Spend const dailySpendTransactions = filterByPeriod(transactions.dailySpend, period); const dailySpendTotal = dailySpendTransactions.reduce((sum, t) => sum + t.amount, 0); document.getElementById('dailySpendTotal').textContent = `¥${dailySpendTotal.toFixed(2)}`; } function filterByPeriod(transactions, period) { const now = new Date(); const today = new Date(now.getFullYear(), now.getMonth(), now.getDate()); if (period === 'all') return transactions; return transactions.filter(t => { const date = new Date(t.date); switch(period) { case 'week': const weekStart = new Date(today); weekStart.setDate(today.getDate() - today.getDay()); return date >= weekStart; case 'month': return date.getFullYear() === now.getFullYear() && date.getMonth() === now.getMonth(); case 'year': return date.getFullYear() === now.getFullYear(); default: return true; } }); } // --- EVENT LISTENERS --- avatar.addEventListener('click', () => avatarUpload.click()); avatarUpload.addEventListener('change', (e) => { if (e.target.files && e.target.files[0]) { const reader = new FileReader(); reader.onload = function(event) { const imgSrc = event.target.result; avatar.src = imgSrc; saveAvatar(imgSrc); } reader.readAsDataURL(e.target.files[0]); } }); bookTitle.addEventListener('blur', () => { // Not linked to ledger names for simplicity of this implementation. // Could be extended to rename the current ledger. }); document.getElementById('loveFundTab').addEventListener('input', (e) => { const bookNames = getBookNames(); bookNames.loveFund = e.target.textContent; saveBookNames(bookNames); updateAddButtonText(); }); document.getElementById('dailySpendTab').addEventListener('input', (e) => { const bookNames = getBookNames(); bookNames.dailySpend = e.target.textContent; saveBookNames(bookNames); updateAddButtonText(); }); tabs.forEach(tab => { tab.addEventListener('click', () => switchTab(tab.dataset.ledger)); }); showModalBtn.addEventListener('click', () => { modal.style.display = 'flex'; updateFormForLedger(); }); closeModalBtn.addEventListener('click', () => { modal.style.display = 'none'; transactionForm.reset(); }); window.addEventListener('click', (e) => { if (e.target == modal) { modal.style.display = 'none'; transactionForm.reset(); } }); transactionForm.addEventListener('submit', (e) => { e.preventDefault(); const ledger = ledgerTypeInput.value; const type = document.getElementById('type').value; const account = document.getElementById('account').value; const amount = parseFloat(document.getElementById('amount').value); const tag = document.getElementById('tag').value; const note = document.getElementById('note').value; if (isNaN(amount) || amount <= 0) { alert("啧，金额填对。"); return; } const newTransaction = { id: Date.now(), date: new Date().toISOString(), ledger, type, account, amount, tag: type === 'expense' ? tag : null, note, comment: getRandomComment(type, tag, amount) }; const transactions = getTransactions(); transactions[ledger].unshift(newTransaction); saveTransactions(transactions); renderTransactions(); modal.style.display = 'none'; transactionForm.reset(); }); document.querySelector('.content').addEventListener('click', e => { if (e.target.classList.contains('delete-btn')) { if (confirm("删了？想好了？")) { const id = parseInt(e.target.dataset.id); const ledger = e.target.dataset.ledger; const transactions = getTransactions(); transactions[ledger] = transactions[ledger].filter(t => t.id !== id); saveTransactions(transactions); renderTransactions(); } } }); document.querySelector('.content').addEventListener('blur', e => { if (e.target.classList.contains('ling-name')) { const newName = e.target.textContent.trim(); if (newName) { lingXiaoName = newName; saveLingXiaoName(newName); document.querySelectorAll('.ling-name').forEach(el => el.textContent = newName); } else { e.target.textContent = lingXiaoName; // Revert if empty } } }, true); document.querySelectorAll('.filters').forEach(filterGroup => { filterGroup.addEventListener('click', e => { if (e.target.tagName === 'BUTTON') { const period = e.target.dataset.period; const ledger = filterGroup.dataset.ledger; filterGroup.querySelector('.active').classList.remove('active'); e.target.classList.add('active'); renderTransactions(period); } }); }); // RAIN EFFECT const rainContainer = document.querySelector('.rain-container'); function createRaindrop() { const drop = document.createElement('div'); drop.classList.add('raindrop'); drop.style.left = `${Math.random() * 100}%`; drop.style.animationDuration = `${0.5 + Math.random() * 0.5}s`; drop.style.animationDelay = `${Math.random() * 5}s`; rainContainer.appendChild(drop); setTimeout(() => { drop.remove(); }, 2000); } setInterval(createRaindrop, 100); // --- INITIAL LOAD --- function init() { avatar.src = getAvatar(); const bookNames = getBookNames(); document.getElementById('loveFundTab').textContent = bookNames.loveFund; document.getElementById('dailySpendTab').textContent = bookNames.dailySpend; lingXiaoName = getLingXiaoName(); switchTab('loveFund'); } init(); }); </script> </body> </html> 